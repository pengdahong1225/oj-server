syntax = "proto3";
option go_package = "./;pb";

import "record.proto";
import "google/protobuf/empty.proto";
import "google/api/annotations.proto";

// record 服务接口
service RecordService {
  // 查询排行榜
  rpc GetLeaderboard(google.protobuf.Empty) returns (GetLeaderboardResponse){
    option (google.api.http) = {
      get: "/api/v1/record/leaderboard"
    };
  };
  // 查询判题结果
  rpc QueryJudgeResult(QueryJudgeResultRequest) returns (QueryJudgeResultResponse){
    option (google.api.http) = {
      get: "/api/v1/record/judge_result"
    };
  };
  // 查询提交记录列表
  rpc GetSubmitRecordList(GetSubmitRecordListRequest) returns (GetSubmitRecordListResponse){
    option (google.api.http) = {
      get: "/api/v1/record/submit_record_list"
    };
  };
  // 查询提交记录详情
  rpc GetSubmitRecordData(GetSubmitRecordRequest) returns (GetSubmitRecordResponse){
    option (google.api.http) = {
      get: "/api/v1/record/submit_record"
    };
  };
  // 查询解决题目列表
  rpc GetSolvedProblemList(GetSolvedProblemListRequest) returns (GetSolvedProblemListResponse);
}

// 查询排行榜
message GetLeaderboardResponse{

}
// 获取已解决题目列表
message GetSolvedProblemListRequest {
}
message GetSolvedProblemListResponse {
}

// 查询提交记录列表 使用偏移量分页
message GetSubmitRecordListRequest {
  int64 uid = 1;
  int32 page = 2;
  int32 page_size = 3;
}
message GetSubmitRecordListResponse {
  int32 total = 1;
  repeated SubmitRecord data = 2;
}
// 查询提交记录详情
message GetSubmitRecordRequest {
  int64 id = 1;
}
message GetSubmitRecordResponse {
  SubmitRecord data = 1;
}

message QueryJudgeResultRequest {
  int64 task_id = 1;
}
message QueryJudgeResultResponse {
  string status = 1;
  string message = 2;
}